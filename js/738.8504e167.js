"use strict";(self["webpackChunkhomework7"]=self["webpackChunkhomework7"]||[]).push([[738],{5738:function(t,s,a){a.r(s),a.d(s,{default:function(){return M}});var e=a(3396),l=a(7139),n=a(9242);const o={class:"container"},c=(0,e._)("h2",null,"購物車",-1),i={class:"mt-4 row"},d={class:"col-sm-12 col-lg-6 pe-3"},u={class:"text-end"},r=["disabled"],h={class:"table align-middle"},p=(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th"),(0,e._)("th",null,"品名"),(0,e._)("th",{style:{width:"150px"}},"數量/單位"),(0,e._)("th",{class:"d-flex justify-content-end"},"單價")])],-1),_=["onClick"],g=(0,e.Uk)(" x "),w=(0,e._)("div",{class:"text-success"},"已套用優惠券",-1),b={class:"input-group input-group-sm"},m={class:"input-group mb-3"},v=["onUpdate:modelValue"],k=["value","selected"],x={class:"input-group-text",id:"basic-addon2"},y={class:"text-end"},f=(0,e._)("small",{class:"text-success"},"折扣價：",-1),C=(0,e._)("td",{colspan:"3",class:"text-end"},"總計",-1),D={class:"text-end"},$=(0,e._)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),z={class:"text-end text-success"};function F(t,s,a,F,q,L){const U=(0,e.up)("font-awesome-icon");return(0,e.wg)(),(0,e.iD)("div",o,[c,(0,e._)("div",i,[(0,e._)("div",d,[(0,e._)("div",u,[(0,e._)("button",{class:"btn btn-outline-danger",type:"button",disabled:0===q.cartData.carts?.length,onClick:s[0]||(s[0]=t=>L.cleanCart(""))}," 清空購物車 ",8,r)]),(0,e._)("table",h,[p,(0,e._)("tbody",null,[q.cartData.carts?((0,e.wg)(!0),(0,e.iD)(e.HY,{key:0},(0,e.Ko)(q.cartData.carts,(t=>((0,e.wg)(),(0,e.iD)("tr",{key:t.id},[(0,e._)("td",null,[(0,e._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:s=>L.cleanCart(t.id)},[q.loadingFlag===t.id?((0,e.wg)(),(0,e.j4)(U,{key:0,icon:"spinner",pulse:""})):(0,e.kq)("",!0),g],8,_)]),(0,e._)("td",null,[(0,e.Uk)((0,l.zw)(t.product.title)+" ",1),w]),(0,e._)("td",null,[(0,e._)("div",b,[(0,e._)("div",m,[(0,e.wy)((0,e._)("select",{"onUpdate:modelValue":s=>t.qty=s,class:"form-select"},[((0,e.wg)(),(0,e.iD)(e.HY,null,(0,e.Ko)(20,(s=>(0,e._)("option",{key:s+t.id,value:s,selected:t.qty===s},(0,l.zw)(s),9,k))),64))],8,v),[[n.bM,t.qty,void 0,{number:!0}]]),(0,e._)("span",x,(0,l.zw)(),1)])])]),(0,e._)("td",y,[f,(0,e.Uk)(" "+(0,l.zw)(t.final_total),1)])])))),128)):(0,e.kq)("",!0)]),(0,e._)("tfoot",null,[(0,e._)("tr",null,[C,(0,e._)("td",D,(0,l.zw)(q.cartData.total),1)]),(0,e._)("tr",null,[$,(0,e._)("td",z,(0,l.zw)(q.cartData.final_total),1)])])])])])])}var q={data(){return{cartData:{carts:[]},loadingFlag:"",isLoading:!1}},methods:{showCarts(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/emptywu/cart").then((t=>{this.cartData=t.data.data})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息")}))},closeLoadingFlag(t){this.loadingFlag=t,this.isLoading=""!==t},cleanCart(t=""){let s="https://vue3-course-api.hexschool.io/v2/api/emptywu/carts";""!==t&&(this.closeLoadingFlag(t),s=`https://vue3-course-api.hexschool.io/v2/api/emptywu/cart/${t}`),this.$http.delete(s).then((t=>{this.$httpMessageState(t,"清空購物車"),this.showCarts(),this.closeLoadingFlag("")})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息")}))}},mounted(){this.load=this.$loading,this.showCarts()}},L=a(89);const U=(0,L.Z)(q,[["render",F]]);var M=U}}]);
//# sourceMappingURL=738.8504e167.js.map